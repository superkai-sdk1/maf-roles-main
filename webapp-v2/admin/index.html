<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MafBoard Admin</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <meta name="theme-color" content="#0a0814" />
    <link rel="stylesheet" href="admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <div id="admin-app">
        <div id="admin-auth-overlay" class="admin-overlay">
            <div class="admin-auth-card">
                <div class="admin-auth-logo">
                    <svg width="56" height="56" viewBox="0 0 1500 1500" fill="none" preserveAspectRatio="xMidYMid meet">
                        <defs><clipPath id="a1"><rect x="0" width="891" y="0" height="1500"/></clipPath><clipPath id="a2"><rect x="0" width="991" y="0" height="1500"/></clipPath></defs>
                        <g transform="translate(601,0)"><g clip-path="url(#a1)"><g fill="#8b5cf6"><g transform="translate(3.402859,1083.691524)"><path d="M 55.921875 -0.78125 L 220.515625 -752.140625 L 127.59375 -874.21875 L 793.890625 -874.21875 C 800.179688 -874.21875 806.742188 -872.117188 813.578125 -867.921875 C 816.722656 -865.296875 819.738281 -862.800781 822.625 -860.4375 C 825.519531 -858.070312 828.28125 -855.316406 830.90625 -852.171875 C 836.15625 -846.910156 840.351562 -840.609375 843.5 -833.265625 C 846.644531 -827.484375 847.695312 -821.96875 846.65625 -816.71875 L 771.828125 -477.28125 L 663.9375 -422.140625 L 748.203125 -368.59375 L 680.46875 -58.28125 C 679.945312 -54.082031 676.535156 -48.566406 670.234375 -41.734375 C 667.078125 -38.066406 663.925781 -34.65625 660.78125 -31.5 C 657.632812 -28.351562 653.957031 -25.46875 649.75 -22.84375 C 645.550781 -19.6875 641.484375 -16.925781 637.546875 -14.5625 C 633.609375 -12.207031 629.539062 -9.71875 625.34375 -7.09375 C 615.882812 -2.882812 608.269531 -0.78125 602.5 -0.78125 Z M 601.71875 -705.671875 L 430.015625 -705.671875 L 396.15625 -548.9375 L 333.9375 -508.78125 L 363.859375 -402.453125 L 312.671875 -169.328125 L 485.15625 -169.328125 L 525.3125 -353.625 L 437.890625 -310.3125 L 387.484375 -488.296875 L 578.078125 -597.78125 Z"/></g></g></g></g>
                        <g transform="translate(60,0)"><g clip-path="url(#a2)"><g fill="#8b5cf6"><g transform="translate(4.515022,1285.394213)"><path d="M 220.515625 -0.78125 L 0.78125 -0.78125 L 164.609375 -752.140625 L 71.671875 -874.21875 L 411.125 -874.21875 L 485.15625 -510.359375 L 737.96875 -874.21875 L 964 -874.21875 L 772.625 -0.78125 L 554.453125 -0.78125 L 634.796875 -368.59375 L 539.5 -222.890625 C 538.445312 -221.835938 537.132812 -220.785156 535.5625 -219.734375 C 532.9375 -218.679688 531.625 -217.367188 531.625 -215.796875 L 522.953125 -207.140625 L 513.5 -197.6875 L 357.5625 -80.328125 L 310.3125 -358.34375 L 301.640625 -373.3125 Z"/></g></g></g></g>
                    </svg>
                </div>
                <h2>MafBoard Admin</h2>
                <p class="admin-auth-subtitle" id="auth-status-text">Проверка авторизации...</p>
                <div id="auth-spinner" class="admin-spinner"></div>
                <div id="auth-error" style="display:none">
                    <p class="admin-error-text" id="auth-error-msg"></p>
                    <a href="/" class="admin-btn admin-btn-secondary">← Вернуться</a>
                </div>
            </div>
        </div>

        <div id="admin-main" style="display:none">
            <aside class="admin-sidebar" id="admin-sidebar">
                <div class="admin-sidebar-header">
                    <div class="admin-sidebar-logo">
                        <svg width="28" height="28" viewBox="0 0 1500 1500" fill="none" preserveAspectRatio="xMidYMid meet">
                            <defs><clipPath id="s1"><rect x="0" width="891" y="0" height="1500"/></clipPath><clipPath id="s2"><rect x="0" width="991" y="0" height="1500"/></clipPath></defs>
                            <g transform="translate(601,0)"><g clip-path="url(#s1)"><g fill="#8b5cf6"><g transform="translate(3.402859,1083.691524)"><path d="M 55.921875 -0.78125 L 220.515625 -752.140625 L 127.59375 -874.21875 L 793.890625 -874.21875 C 800.179688 -874.21875 806.742188 -872.117188 813.578125 -867.921875 C 816.722656 -865.296875 819.738281 -862.800781 822.625 -860.4375 C 825.519531 -858.070312 828.28125 -855.316406 830.90625 -852.171875 C 836.15625 -846.910156 840.351562 -840.609375 843.5 -833.265625 C 846.644531 -827.484375 847.695312 -821.96875 846.65625 -816.71875 L 771.828125 -477.28125 L 663.9375 -422.140625 L 748.203125 -368.59375 L 680.46875 -58.28125 C 679.945312 -54.082031 676.535156 -48.566406 670.234375 -41.734375 C 667.078125 -38.066406 663.925781 -34.65625 660.78125 -31.5 C 657.632812 -28.351562 653.957031 -25.46875 649.75 -22.84375 C 645.550781 -19.6875 641.484375 -16.925781 637.546875 -14.5625 C 633.609375 -12.207031 629.539062 -9.71875 625.34375 -7.09375 C 615.882812 -2.882812 608.269531 -0.78125 602.5 -0.78125 Z M 601.71875 -705.671875 L 430.015625 -705.671875 L 396.15625 -548.9375 L 333.9375 -508.78125 L 363.859375 -402.453125 L 312.671875 -169.328125 L 485.15625 -169.328125 L 525.3125 -353.625 L 437.890625 -310.3125 L 387.484375 -488.296875 L 578.078125 -597.78125 Z"/></g></g></g></g>
                            <g transform="translate(60,0)"><g clip-path="url(#s2)"><g fill="#8b5cf6"><g transform="translate(4.515022,1285.394213)"><path d="M 220.515625 -0.78125 L 0.78125 -0.78125 L 164.609375 -752.140625 L 71.671875 -874.21875 L 411.125 -874.21875 L 485.15625 -510.359375 L 737.96875 -874.21875 L 964 -874.21875 L 772.625 -0.78125 L 554.453125 -0.78125 L 634.796875 -368.59375 L 539.5 -222.890625 C 538.445312 -221.835938 537.132812 -220.785156 535.5625 -219.734375 C 532.9375 -218.679688 531.625 -217.367188 531.625 -215.796875 L 522.953125 -207.140625 L 513.5 -197.6875 L 357.5625 -80.328125 L 310.3125 -358.34375 L 301.640625 -373.3125 Z"/></g></g></g></g>
                        </svg>
                        <span>MafBoard</span>
                    </div>
                    <button class="admin-sidebar-close" id="sidebar-close-btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                    </button>
                </div>

                <div class="admin-nav-section">
                    <span class="admin-nav-label">Основное</span>
                </div>
                <nav class="admin-nav">
                    <button class="admin-nav-item active" data-page="dashboard" onclick="AdminApp.navigate('dashboard')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
                        <span>Дашборд</span>
                    </button>
                    <button class="admin-nav-item" data-page="users" onclick="AdminApp.navigate('users')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                        <span>Пользователи</span>
                    </button>
                    <button class="admin-nav-item" data-page="profiles" onclick="AdminApp.navigate('profiles')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                        <span>Профили</span>
                    </button>
                </nav>

                <div class="admin-nav-section">
                    <span class="admin-nav-label">Игровое</span>
                </div>
                <nav class="admin-nav">
                    <button class="admin-nav-item" data-page="gameControl" onclick="AdminApp.navigate('gameControl')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>
                        <span>Управление</span>
                    </button>
                    <button class="admin-nav-item" data-page="games" onclick="AdminApp.navigate('games')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>
                        <span>Игры</span>
                    </button>
                    <button class="admin-nav-item" data-page="summaries" onclick="AdminApp.navigate('summaries')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                        <span>Итоги</span>
                    </button>
                    <button class="admin-nav-item" data-page="rooms" onclick="AdminApp.navigate('rooms')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                        <span>Комнаты</span>
                    </button>
                </nav>

                <div class="admin-nav-section">
                    <span class="admin-nav-label">Контент</span>
                </div>
                <nav class="admin-nav">
                    <button class="admin-nav-item" data-page="notifications" onclick="AdminApp.navigate('notifications')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
                        <span>Уведомления</span>
                    </button>
                </nav>

                <div class="admin-nav-section">
                    <span class="admin-nav-label">Система</span>
                </div>
                <nav class="admin-nav">
                    <button class="admin-nav-item" data-page="players" onclick="AdminApp.navigate('players')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
                        <span>GoMafia Sync</span>
                    </button>
                    <button class="admin-nav-item" data-page="sessions" onclick="AdminApp.navigate('sessions')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                        <span>Auth Сессии</span>
                    </button>
                    <button class="admin-nav-item" data-page="system" onclick="AdminApp.navigate('system')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                        <span>Система</span>
                    </button>
                </nav>

                <div class="admin-sidebar-footer">
                    <div class="admin-user-info" id="admin-user-info">
                        <div class="admin-user-avatar" id="admin-user-avatar">A</div>
                        <div class="admin-user-details">
                            <span class="admin-user-name" id="admin-user-name">Admin</span>
                            <span class="admin-user-role">Администратор</span>
                        </div>
                    </div>
                    <button class="admin-logout-btn" onclick="AdminApp.logout()" title="Выйти">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    </button>
                </div>
            </aside>

            <main class="admin-content">
                <header class="admin-topbar">
                    <button class="admin-menu-btn" id="sidebar-toggle-btn">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="15" y2="12"/><line x1="3" y1="18" x2="18" y2="18"/></svg>
                    </button>
                    <div class="admin-breadcrumb" id="admin-breadcrumb">
                        <span class="admin-breadcrumb-item">Дашборд</span>
                    </div>
                    <div class="admin-topbar-actions" id="admin-topbar-actions">
                        <button class="admin-topbar-btn" onclick="AdminApp.refreshCurrentPage()" title="Обновить (R)">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
                        </button>
                    </div>
                </header>

                <div class="admin-page-content" id="admin-page-content"></div>
            </main>
        </div>
    </div>

    <div id="admin-modal" class="admin-modal" style="display:none">
        <div class="admin-modal-backdrop" onclick="AdminApp.closeModal()"></div>
        <div class="admin-modal-content" id="admin-modal-content"></div>
    </div>

    <div id="admin-confirm" class="admin-modal" style="display:none">
        <div class="admin-modal-backdrop"></div>
        <div class="admin-confirm-content" id="admin-confirm-content"></div>
    </div>

    <div id="admin-toast-container" class="admin-toast-container"></div>

    <script src="admin.js"></script>
</body>
</html>
